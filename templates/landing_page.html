<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Landing Page</title>

    <script type="text/javascript">(function(){window['_surfly_settings']=window['_surfly_settings']||{
        widgetkey:"dd402bb4940b4cf3a855aaa371d11419",
        apiserver:"https://surfly.com/v2/",
	docked_only: true,
        format_session_id: false,
        };var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src="//surfly.com/static/js/widget.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n); })();</script>
    </script>
    <style>
	.button {
	    background-color: rgba(0,121,58,0.6);
	    border: none;
	    color: black;
	    padding: 15px 32px;
	    text-align: center;
	    text-decoration: none;
	    display: inline-block;
	    font-size: 42px;
	    margin: 4px 2px;
	    cursor: pointer;
            width: 100%;
	}
    </style>
  </head>

  <body>
        <button class="button" id="id_button">Waiting for ID...</button>
	<script type="text/javascript">
	var request = new XMLHttpRequest();

	request.open('GET', 'https://api.surfly.com/v2/sessions/?api_key=33c092b9d4d6425e817f5140447e43da&active_session=true');

	request.onreadystatechange = function () {
	  if (this.readyState === 4) {
	    if(window.__surfly){
		    var body = this.responseText; 
		    var index = body.indexOf("queue_id");
		    var id = body.substring(index+10, body.length-2);

		    document.getElementById("id_button").innerHTML=id;
	    }
	  }
	};

	request.send();
	</script>
   </body>
</html>
